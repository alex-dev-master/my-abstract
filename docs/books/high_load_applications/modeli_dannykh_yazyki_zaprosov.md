## Модели данных и языки запросов <!-- {docsify-ignore} -->

Исторически сначала данные представлялись в виде одного большого дерева
(иерар­хическая модель), но такой вариант плохо подходил для представления
связей «многие-ко-многим» и для решения этой проблемы была придумана реля-
ционная модель. А немного позже разработчики обнаружили, что она не слишком
хорошо подходит для некоторых приложений. Новые нереляционные хранилища
данных NoSQL делятся на две основные разновидности.
1. Документоориентированные БД предназначены для тех сценариев использо-
вания, при которых данные поступают в виде отдельных документов и связи
между документами редки.
2. Графовые БД нацелены в противоположном направлении: они предназначены
для сценариев применения, в которых любые данные потенциально могут быть
взаимосвязаны.

Одна из общих черт документоориентированных и графовых БД — отсутствие
обязательной схемы для хранимых данных, что облегчает адаптацию приложений
к изменению требований.

Основные доводы в пользу документной модели данных — гибкость схемы, лучшая
производительность вследствие локальности и большая близость к применяемым
структурам данных (для некоторых приложений). Реляционная модель отвечает на
это лучшей поддержкой соединений, а также связей «многие-к-одному» и «многие-
ко-многим».

Реляционная модель, выставляет все данные напоказ: отношение (таб­
лица) — просто набор кортежей (строк), вот и все. Никаких лабиринтообразных
вложенных структур, никаких запутанных путей доступа, необходимых для про-
смотра данных. Можно прочитать любую строку в таблице или даже все строки,
выбирая те, что соответствуют произвольному условию. Можно прочитать конкрет-
ную строку путем объявления некоторых столбцов ключом и выполнения поиска
по этому ключу. Можно вставить новую строку в любую таблицу, не беспокоясь
о связях по внешним ключам с другими таблицами1.
В реляционной базе данных оптимизатор запросов автоматически принимает реше-
ние о том, в каком порядке выполнять части запроса и какие индексы использовать.

Существует несколько основных причин широкого внедрения баз данных NoSQL,
включая:
- потребность в больших возможностях масштабирования, чем у реляционных БД,
включая обработку очень больших наборов данных или очень большую пропускную способность по записи;
- предпочтение свободного программного обеспечения вместо коммерческих продуктов;
- специализированные запросные операции, плохо поддерживаемые реляци-
онной моделью;
- разочарование ограниченностью реляционных схем и стремление к более ди-
намичным и выразительным моделям данных


Одним из новшеств реляционной модели был новый способ запроса данных: SQL —
декларативный язык запросов, в то время как IMS и CODASYL используют для
выполнения запросов императивный код.
Императивный язык говорит компьютеру выполнить определенные операции
в заданном порядке. Вы можете представить это как движение по коду строка за
строкой, вычисление условных выражений, обновление переменных и принятие
решения о том, пройти ли цикл еще раз.
В декларативных языках запросов, таких как SQL или реляционная алгебра,
следует описать шаблон необходимых данных — каким условиям должны соот-
ветствовать результаты и как данные должны быть преобразованы (например,
отсортированы, сгруппированы и агрегированы) — но не то, как добиться этого.
Решение о том, какие индексы и методы соединения использовать и в каком
порядке выполнять различные части запроса, должен принять оптимизатор за-
просов СУБД.